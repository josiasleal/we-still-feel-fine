/*! We Still Feel Fine Client JS v0.0.1 | Copyright 2013 Lauren Sperber https://github.com/lauren/node-connect-four/blob/master/LICENSE | we-still-feel-fine 2013-08-08 */
!function(){window.onload=function(){var a=io.connect(),b=[],c=function(){return"#"+Math.floor(16777215*Math.random()).toString(16)},d=function(){return Math.random()*document.documentElement.clientWidth},e=function(){return Math.random()*document.documentElement.clientHeight},f=function(){return.25*document.documentElement.clientHeight};a.on("feelingTweet",function(a){console.log(a),b.push(a);var f=d3.select("svg").selectAll("circle").data(b);f.enter().append("circle").attr("class","circle").attr("data-feeling",a.feeling).attr("data-tweet",a.text).style("fill",c()).style("stroke",c()).style("stroke-width","2px").attr("cx",d()).attr("cy",e()).attr("r",0).transition().duration(200).attr("r",20)});var g=function(a,b,c){a.addEventListener?a.addEventListener(b,c):a.attachEvent(b,c)},h=function(a){d3.select(a).transition().duration(200).attr("class","circle").attr("r",20)},i=function(){d3.select("svg").selectAll("circle").transition().duration(200).attr("r",20).attr("class","circle")},j=function(a){d3.select(a).transition().duration(200).style("opacity","0")};g(document,"click",function(a){var b=a.srcElement,d=document.getElementById("tweet-detail"),e=document.createElement("text");"circle selected"===b.className.baseVal?(h(b),j(d)):"circle"===b.className.baseVal?(i(),b.parentNode.appendChild(b),d3.select(b).transition().duration(200).attr("class","selected").attr("r",f),d.innerHTML=b.dataset.tweet,d3.select(d).transition().duration(200).style("opacity","0.8"),e.innerHTML=b.dataset.feeling,e.style.fill=c()):(i(),j(d))})}}();